<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite App</title>
  </head>
  <body>
    <canvas id="Background"></canvas> 
    <script type="module" src="/main.js"></script>
    <script type="x-shader/x-fragment" id="fragmentShader">

      varying vec3 vNormal;
      varying float vWhiteness;
      varying float vReflectionFactor;
  
      void main() {
        vec3 colored = mix(vNormal, vec3(1.), .75);
        gl_FragColor = vec4(vec3(colored), vReflectionFactor);
      }
  
    </script>
  
    <script type="x-shader/x-vertex" id="vertexShader">
  
      varying vec3 vNormal;
      varying vec3 vCamera;
      varying float vReflectionFactor;
  
      float rand(vec2 co) {
        return fract(sin(dot(co, vec2(12.9898, 78.233))) * 43758.5453);
      }
  
      void main() {
        vNormal = normal;
        vNormal *= rand(instanceMatrix[3].xz);
  
        vec4 worldPosition = modelMatrix * instanceMatrix * vec4(position + vec3(0., .3, 0.), 1.);
        vReflectionFactor = .2 + 2. * pow(1. + dot(normalize(worldPosition.xyz - cameraPosition - vec3(1., 2., 0.)), normal), 3.);
  
        gl_Position = projectionMatrix * viewMatrix * worldPosition;
      }
    </script>
  </body>
</html>
